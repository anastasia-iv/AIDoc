# AIDoc
**AIDoc** - это многофункциональный интеллектуальный медицинский помощник, созданный с целью не заменить врача, но предоставить возможность получать первичную консультацию для пользователя (студентов / медицинских работников / аналитиков здравоохранения) и ответы на вопросы с опорой на достоверные медицинские источники.

# Цель проекта
- Сократить время поиска достоверной медицинской информации с нескольких минут до секунд.  
- Повысить точность выдачи и долю релевантных ответов.  
- Обеспечить возможность интеграции модели в сервисы медицинских справочников и систем поддержки принятия решений.

## Набор данных

Используется корпус **BEIR → NFCorpus** — медицинский датасет, включающий:
- медицинские **запросы** (вопросы пользователей);
- коллекцию **документов** (фрагменты научных статей);
- **qrels** — разметку релевантности между запросами и документами.

## План экспериментов

### 1. Базовые эксперименты
- Тестиорвание исходной модели.
- Использовать стандартный алгоритм **BM25** для извлечения документов.  
- Получить стартовые метрики: `nDCG@10`, `MRR@10`, `Recall@50`.  
- Зафиксировать результаты как baseline для сравнения с дообученной моделью.

### 2. Дообучение модели
- Взять предобученную модель **`cross-encoder/ms-marco-MiniLM-L-6-v2`** с Hugging Face.  
- Дообучить на медицинском корпусе **NFCorpus (BEIR)**.  
- Настроить гиперпараметры обучения:
  - `learning_rate = 2e-5`
  - `batch_size = 16`
  - `num_epochs = 2`
  - `max_length = 256`
- Цель: улучшить метрики качества по сравнению с baseline.

### 3. Валидация модели
- Оценить дообученную модель на отложенной выборке (`dev`).  
- Сравнить метрики `nDCG@10` и `MRR@10` с базовой моделью.  
- Проверить устойчивость результатов и воспроизводимость при фиксированном `random_seed`.


## Метрики

| Категория | Метрика | Целевое значение | Комментарий |
|------------|----------|------------------|--------------|
| Качество поиска | nDCG@10 | ≥ 0.36 | Основная метрика для оценки ранжирования |
| Качество поиска | MRR@10 | ≥ 0.30 | Проверка качества на top-результатах |
| Производительность | Среднее время отклика | ≤ 200 мс | На 10 кандидатов |
| Надёжность | Доля неуспешных запросов | ≤ 1 % | Ошибки API или недоступность |
| Ресурсы | Использование CPU/RAM | В пределах SLA | Проверяется нагрузочными тестами |

# Структура проекта
```text
AIDoc/

  ├─ README.md
  ├─ requirements.txt
  ├─ configs/
  │   ├─ train.yaml
  │   └─ model.yaml
  ├─ src/
  │   ├─ data/
  │   │   ├─ beir_loader.py
  │   │   └─ preprocessing.py
  │   ├─ models/
  │   │   ├─ cross_encoder.py
  │   │   └─ utils.py
  │   ├─ training/
  │   │   ├─ trainer.py
  │   │   └─ metrics.py
  │   ├─ inference/
  │   │   └─ api_postprocess.py
  │   └─ utils/
  │       ├─ logging_setup.py
  │       └─ seed.py
  ├─ scripts/
  │   └─ train.py
  ├─ tests/
  │   ├─ test_data_checks.py
  │   ├─ test_preprocessing.py
  │   ├─ test_trainer_loop.py
  │   └─ test_api_postprocess.py
  └─ .github/
      └─ workflows/
          └─ ci.yml
